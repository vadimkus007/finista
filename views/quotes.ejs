<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/css/style.css' />
    <!-- Bootstrap core CSS -->
    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/tsort.css" rel="stylesheet"> 
    <link href="/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">

    <script src="/js/main.js"></script>
  </head>

  <body>
    <header>
      <% include menu %>
    </header>
    <main role="main">

      <div class="container-fluid">
        <div class="info-header">
            <h2>Котировки</h2> 
        </div>
        
        <div class="main-content">

          <ul class="nav nav-tabs">
            <li class="nav-item">
              <a class="nav-link active" data-toggle="tab" href="#stock">Акции</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-toggle="tab" href="#etf">ETF/ПИФы</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-toggle="tab" href="#index">Индексы</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-toggle="tab" href="#bond">Облигации</a>
            </li>
          </ul>

          <div class="tab-content">
            
            <div class="tab-pane fade show active" id="stock">
              <div class = "">
                <input type="text" class="filterInputTable" id="filterInputTable1" onkeyup="filterTable('filterInputTable1', 'filterTable1')" placeholder="Поиск по тикеру...">

              </div>
              
              <table class = "filterTable tsort" id = "filterTable1">
                <thead>
                  <tr>
                    <th>Тикер</th>
                    <th>Компания</th>
                    <th>Последняя</th>
                    <th>Изменение, %</th>
                    <th>Открытие</th>
                    <th>Мин.</th>
                    <th>Макс.</th>
                    <th>Ср.взвеш.</th>
                    <th>Объем</th>
                    <th>Время</th>
                  </tr>
                </thead>
                <tfoot>
                </tfoot>
                <tbody>
                  <% for (var i = 0; i < data['stock'].length; i++) { %>   
                    <tr>
                      <td><a href = "/quotes/<%= data['stock'][i]['secid'] %>" ><%= data['stock'][i]['secid'] %></a></td>
                      <td><%= data['stock'][i]['shortname'] %></td>
                      <td><%= data['stock'][i]['last'] %></td>
                      <td><span style="
                        <% if(data['stock'][i]['lasttoprevprice']<0){ %>
                          color:red;
                        <% } %>
                        <% if(data['stock'][i]['lasttoprevprice']>0){ %>
                          color:green;
                        <% } %>
                      "> <%= data['stock'][i]['lasttoprevprice'] %> %</span></td>
                      <td><%= data['stock'][i]['open'] %></td>
                      <td><%= data['stock'][i]['low'] %></td>
                      <td><%= data['stock'][i]['high'] %></td>
                      <td><%= data['stock'][i]['waprice'] %></td>
                      <td><%= data['stock'][i]['valtoday'] %></td>
                      <td><%= data['stock'][i]['time'] %></td>
                    </tr>
                  <% } %>
                </tbody>
              </table>

            </div>
            <div class="">
            </div>

            <div class="tab-pane fade" id="etf">
              <div class = "">
                <input type="text" class = "filterInputTable" id="filterInputTable2" onkeyup="filterTable('filterInputTable2', 'filterTable2')" placeholder="Поиск по тикеру...">
              </div>
              <table class = "filterTable tsort" id = "filterTable2">
                <thead>
                  <tr>
                    <th>Тикер</th>
                    <th>Компания</th>
                    <th>Последняя</th>
                    <th>Изменение, %</th>
                    <th>Открытие</th>
                    <th>Мин.</th>
                    <th>Макс.</th>
                    <th>Ср.взвеш.</th>
                    <th>Объем</th>
                    <th>Время</th>
                  </tr>
                </thead>
                <tfoot>
                </tfoot>
                <tbody>
                  <% for (var i = 0; i < data['etf'].length; i++) { %>   
                    <tr>
                      <td><a href = "/quotes/<%= data['etf'][i]['secid'] %>" ><%= data['etf'][i]['secid'] %></a></td>
                      <td><%= data['etf'][i]['shortname'] %></td>
                      <td><%= data['etf'][i]['last'] %></td>
                      <td><span style="
                        <% if(data['etf'][i]['lasttoprevprice']<0){ %>
                          color:red;
                        <% } %>
                        <% if(data['etf'][i]['lasttoprevprice']>0){ %>
                          color:green;
                        <% } %>
                      "> <%= data['stock'][i]['lasttoprevprice'] %> %</span></td>
                      <td><%= data['etf'][i]['open'] %></td>
                      <td><%= data['etf'][i]['low'] %></td>
                      <td><%= data['etf'][i]['high'] %></td>
                      <td><%= data['etf'][i]['waprice'] %></td>
                      <td><%= data['etf'][i]['valtoday'] %></td>
                      <td><%= data['etf'][i]['time'] %></td>
                    </tr>
                  <% } %>
                </tbody>
              </table>
            </div>

            <div class="tab-pane fade" id="index">
              <div class = "">
                  <input type="text" class = "filterInputTable" id="filterInputTable3" onkeyup="filterTable('filterInputTable3', 'filterTable3')" placeholder="Поиск по тикеру...">
                </div>
              <table class = "filterTable tsort" id = "filterTable3">
                <thead>
                  <tr>
                    <th>Тикер</th>
                    <th>Название</th>
                    <th>Текущее значение</th>
                    <th>Изменение за день</th>
                    <th>изменение за месяц</th>
                    <th>Изменение за год</th>
                  </tr>
                </thead>
                <tfoot>
                </tfoot>
                <tbody>
                  <% for (var i = 0; i < data['index'].length; i++) { %>   
                    <tr>
                      <td><a href = "/quotes/<%= data['index'][i]['secid'] %>" ><%= data['index'][i]['secid'] %></a></td>
                      <td><%= data['index'][i]['shortname'] %></td>
                      <td><%= data['index'][i]['lastvalue'] %></td>
                      <td><%= data['index'][i]['lastchangetoopenprc'] %></td>
                      <td><%= data['index'][i]['monthchangeprc'] %></td>
                      <td><%= data['index'][i]['yearchangeprc'] %></td>
                    </tr>
                  <% } %>
                </tbody>
              </table>

            </div>

            <div class="tab-pane fade" id="bond">
              Bonds
            </div>

          </div>

        </div>

      </div>

    </main>


  </body>
  <!-- Подключаем jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Подключаем плагин Popper (необходим для работы компонента Dropdown и др.) -->
    <script src="/popper/popper.min.js"></script>
    <!-- Подключаем Bootstrap -->
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <!-- Tsort. Сортировка таблиц плагин -->
    <script src="/js/tsort.js"></script>
    <script>$( document ).ready(function() {$('.tsort').tsort();});</script>
    <!-- Table pagination -->
    <!--<script src = "/js/jquery.simplePagination.js"></script>
    <script>
      $("#filterTable1").simplePagination({
        perPage: 20,
        // CSS classes to custom the pagination
        containerClass: 'paginator',
        previousButtonClass: 'btn btn-md btn-primary',
        nextButtonClass: 'btn btn-md btn-primary',
        // text for next and prev buttons
        previousButtonText: 'Назад',
        nextButtonText: 'Вперед',
        // initial page
        currentPage: 1
      });
    </script>
  -->

</html>